rootContext:
  results: []

steps:
  - type: request
    name: Search with Pagination and Filters
    request:
      url: https://api.example.com/search
      method: POST
      headers:
        Content-Type: application/json
      body:
        query: "golang"
        filters:
          category: "programming"
      pagination:
        stopOn:
          - type: pageNum
            compare: gte  # Note: pageNum type currently ignores compare field and always uses >=
            value: 2
        params:
          - name: offset
            location: body
            type: int
            increment: "+ 10"
            default: "0"
    mergeOn: .results += $res
